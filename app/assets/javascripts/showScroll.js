/* Createur
	Morgane Treuillet
	http://morganetreuillet.fr
*/


// Parametres par defaut si aucun parametre choisi dans la classe
Params = {	
	"delay" : "0",						// delay avant l apparition d un element

	"hide" : "window",					// quand un element arrive par le cote, d ou il arrive
	"times" : 1,						// Nombre de fois qu un element est decale quand cest par rapport a lui-meme quand hide = self

	"scaleStart" : "0.5",				// dimension d un objet avant qu il grandisse/retricisse a sa taille finale
	"scaleEnd" : "1",					// taille finale d un objet
	"fadeStart" : "0",					// opacite d un objet avant qu il atteigne son opacity finale
	"fadeEnd" : "1",					// opacite finale d un objet
	"tour" : 1,							// nombre de tour que va faire un element s il arrive en tournant

	"limit" : "centerWindow",					// A partir de quand on affiche un objet par raport a l ecran
	"anchor" : "center",					// Point d ancrage d un element sur la ligne vertical

	"transitionOpacity" : "1s",			// transition pour l arrivee en opacite
	"transitionMoveFromLeft" : "1s",	// transition pour l arrivee par la gauche
	"transitionMoveFromRight" : "1s",	// Idem par la droite
	"transitionTransform" : "1s"		// Idem pour la taille
}


$.fn.hasClassRegEx = function(regex) {var classes = $(this).attr('class'); if(!classes || !regex){ return false; } classes = classes.split(' '); var len = classes.length; for(var i=0; i<len; i++) {if(classes[i].match(regex)){nombre = classes[i].replace(regex,""); return nombre; } } return false; }; function showElement(el) {if(el.hasClass("fade")) {var opacity = Params.fadeEnd ; if(el.hasClassRegEx("fadeEnd-")) {opacity = el.hasClassRegEx("fadeEnd-"); } el.css("opacity",opacity); } el.removeClass("fade"); if(el.hasClass("leftToRight")) {el.css("left","0px"); } el.removeClass("leftToRight"); if(el.hasClass("rightToLeft")) {el.css("right","0px"); } el.removeClass("rightToLeft"); if(el.hasClass("bottomToTop")) {el.css("top","0px"); } el.removeClass("bottomToTop"); if(el.hasClass("topToBottom")) {el.css("top","0px"); } el.removeClass("topToBottom"); if(el.hasClass("scale") && el.hasClass("rotation")) {var fin = Params.scaleEnd ; if(el.hasClassRegEx("scaleEnd-")) {fin = el.hasClassRegEx("scaleEnd-"); } el.css("transform","rotate(0deg) scale("+fin+")"); el.removeClass("rotation"); el.removeClass("scale"); } if(el.hasClass("scale")) {var fin = Params.scaleEnd ; if(el.hasClassRegEx("scaleEnd-")) {fin = el.hasClassRegEx("scaleEnd-"); } el.css("transform","scale("+fin+")"); } el.removeClass("scale"); if(el.hasClass("rotation")) {el.css("transform","rotate(0deg)"); } el.removeClass("scale"); } function verifElementsToShow() {var scroll = $(document).scrollTop(); $(".showScroll").each(function(){var limit = Params.limit ; if($(this).hasClassRegEx("limit-")) {limit = $(this).hasClassRegEx("limit-"); } var offset = $(this).offset().top; var hauteurEcran = screen.height; var hauteurObj = $(this).height(); switch(limit) {case "bottomWindow" : var declench = offset - hauteurEcran; break; case "centerWindow" : var declench = offset - (hauteurEcran/2); break; default : var declench = offset - limit; break ; } var anchor = Params.anchor ; if($(this).hasClassRegEx("anchor-")) {anchor = $(this).hasClassRegEx("anchor-"); } switch(anchor) {case "top" : declench += 0; break; case "bottom" : declench += hauteurObj; break ; case "center" : declench = declench + hauteurObj/2 ; break ; default : declench += hauteurObj/2 ; break ; } if(scroll >= declench) {if($(this).hasClass("showScrollContainer") && $(this).hasClass("showScroll")) {var container = $(this); var elements = []; $(".showScrollElement",$(this)).each(function(){elements.push(""); }); var pos=1; $(".showScrollElement",$(this)).each(function(){var position = pos ; if($(this).hasClassRegEx("show-")) {position = $(this).hasClassRegEx("show-"); } elements[position-1] = $(this); pos++ ; }); var length = elements.length ; var delay2 = 0; elements.forEach(function(element) {var delay = Params.delay ; if(element.hasClassRegEx("delay-")) {delay = element.hasClassRegEx("delay-"); } $(this).delay(delay).queue(function(next){showElement(element); next(); }); delay2 += Number(delay) ; }); container.removeClass("showScroll"); } else {if(!$(this).parent().hasClass("showScroll")) {showElement($(this)); } } } }); } $(document).ready(function() {$(".showScroll, .showScrollElement").css("transition","0s"); $(".showScrollElement.fade, .showScroll.fade").each(function() {var opacity = Params.fadeStart ; if($(this).hasClassRegEx("fadeStart-")) {opacity = $(this).hasClassRegEx("fadeStart-"); } $(this).css("opacity",opacity); }); $(".showScroll.leftToRight, .showScrollElement.leftToRight, .showScroll.rightToLeft, .showScrollElement.rightToLeft, .showScrollElement.topToBottom, .showScroll.topToBottom, .showScrollElement.bottomToTop, .showScroll.bottomToTop").css("position",'relative'); $(".showScroll.leftToRight, .showScrollElement.leftToRight").each(function() {var hide = Params.hide ; if($(this).hasClassRegEx("hide-")) {hide = $(this).hasClassRegEx("hide-"); } var ecran = $(window).width(); var obj = $(this).width(); var offsetLeft = $(this).offset().left; switch(hide) {case "window" : var neg = -offsetLeft -obj + "px" ; ; break; case "self" : var neg = -obj*Params.times+"px"; break; default : var neg = -hide+"px"; break; } $(this).css("left",neg); }); $(".showScroll.rightToLeft, .showScrollElement.rightToLeft").each(function() {var hide = Params.hide ; if($(this).hasClassRegEx("hide-")) {hide = $(this).hasClassRegEx("hide-"); } var ecran = $(window).width(); var obj = $(this).width(); var offsetLeft = $(this).offset().left; switch(hide){case "window" : var neg = -offsetLeft -obj + "px" ; break; case "self" : var neg = -obj*Params.times+"px"; break; default : var neg = -hide+"px"; break; } $(this).css("right",neg); }); $(".showScrollElement.rotation, .showScroll.rotation").each(function(){var tour = Params.tour ; if($(this).hasClassRegEx("tour-")) {tour = Number($(this).hasClassRegEx("tour-"))*360; } $(this).css("transform","rotate("+tour+"deg)"); }); $(".showScrollElement.scale, .showScroll.scale").each(function(){var taille = Params.scaleStart ; if($(this).hasClassRegEx("scaleStart-")) {taille = Number($(this).hasClassRegEx("scaleStart-")); } $(this).css("transform","scale("+taille+")"); }); $(".showScrollElement.scale.rotation, .showScroll.scale.rotation").each(function(){var tour = Params.tour ; if($(this).hasClassRegEx("tour-")) {tour = Number($(this).hasClassRegEx("tour-"))*360; } var taille = Params.scaleStart ; if($(this).hasClassRegEx("scaleStart-")) {taille = Number($(this).hasClassRegEx("scaleStart-")); } $(this).css("transform","rotate("+tour+"deg) scale("+taille+")"); }); $(document).delay(50).queue(function(next) {$(".showScroll, .showScrollElement").css("transition","opacity "+Params.transitionOpacity+", left "+Params.transitionMoveFromLeft+", right "+Params.transitionMoveFromRight+", transform "+Params.transitionTransform); verifElementsToShow(); }); $(window).scroll(function(){verifElementsToShow(); }); });
